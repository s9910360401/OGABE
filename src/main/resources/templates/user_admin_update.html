<!doctype html>
<html lang="en">
<head>
<title>OGABE|後台會員資料修改查詢</title>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">

<link
	href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900"
	rel="stylesheet">

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
	crossorigin="anonymous">
<link rel="stylesheet" href="/sidebar-01/css/style.css">
<style>

#navbarSupportedContent ul, li {
	color: black;
	font-size: 1.02em;
	font-weight: 800;
}

#preview {
	border: 1px solid black;
	display: inline-block;
	width: 145px;
	min-height: 196px;
	position: relative;
}

#preview span.text {
	position: absolute;
	display: inline-block;
	left: 50%;
	top: 50%;
	transform: translate(-50%, -50%);
	z-index: -1;
	color: lightgray;
}

#preview img.preview_img {
	width: 100%;
	height: 100%;
}

#userpic {
	float: right;
	
}

#title {
	height: 250px;
	
}

</style>
</head>
<body>

		<div class="wrapper d-flex align-items-stretch">
			<nav id="sidebar">
				<div class="p-4 pt-5">
          <img src="/sidebar-01/images/ogabecolor21.png" alt="" width="210" height="120">
		  		
	        <ul class="list-unstyled components mb-5">
            <li>
                <a href="#"> <i class="fa-solid fa-image fa-lg"></i>會員管理</a>
            </li>
	          <li>
	              <a href="#">檢舉文章管理</a>
	          </li>
	          <li>
              <a href="#pageSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">TBD</a>
              <ul class="collapse list-unstyled" id="pageSubmenu">
                <li>
                    <a href="#">TBD 1</a>
                </li>
                <li>
                    <a href="#">TBD 2</a>
                </li>
                <li>
                    <a href="#">TBD 3</a>
                </li>
              </ul>
	          </li>
	          <li>
              <a href="#">TBD</a>
	          </li>
	          <li>
              <a href="#">TBD</a>
	          </li>
	        </ul>

	        <div class="footer">
            
	        </div>

	      </div>
    	</nav>

        <!-- Page Content  -->
      <div id="content" class="p-3 p-md-4">

        <nav class="navbar navbar-expand-lg navbar-light bg-light">
          <div class="container-fluid">

            <button type="button" id="sidebarCollapse" class="btn btn-primary">
              <i class="fa fa-bars"></i>
              <span class="sr-only">Toggle Menu</span>
            </button>
            <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fa fa-bars"></i>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="nav navbar-nav ml-auto">
                <h2>OGABE後台管理</h2>
              </ul>
            </div>
          </div>
        </nav>
        <!-- 主要內容區域 -->
        <!-- 以下內容各自定義 -->
  		<div id="contents" class="container p-4">
			
			<span id="title">
					<br>
					<h1>會員基本資料</h1>
					<div id="userpic">
					<div>
						<i class="fa-solid fa-image fa-lg"></i> <label
						for="exampleInputPassword1">會員照片</label>
					</div>

					<img th:src="@{/image/display/{userid}(userid=${uservo.userid})}"
						width="145" height="196" 
						onerror="javascript:this.src='/images/user_default_pic.png'">
					</div>

			</span>



			<form enctype="multipart/form-data" th:action="@{/admin/user/edituser}"
				method="post" name="update-form">

				<div class="form-group col-sm-8">
					<i class="fa-regular fa-id-card fa-lg"></i> <label
						for="exampleInputPassword1">會員ID</label>
					<div class="input-group">
						<input type="text" class="form-control" id="UserID"
							th:value="${uservo.userid}" name="userid" readonly>
					</div>

				</div>
				<br>

				<div class="form-group col-sm-8">
					<i class="fa-solid fa-envelope fa-lg"></i> <label
						for="exampleInputPassword1">會員Email</label>
					<div class="input-group">
						<input type="text" class="form-control" id="UserEmail"
							th:value="${uservo.useremail}" name="useremail" readonly>
					</div>
				</div>
				<br> <input type="hidden" class="form-control" id="UserPwd"
					th:value="${uservo.userpwd}" name="userpwd">


				<div class="form-group col-sm-8">
					<i class="fa-solid fa-user fa-lg"></i> <label
						for="exampleInputPassword1">會員姓名</label> <input type="text"
						class="form-control" id="UserName" th:value="${uservo.username}"
						name="username" required>

				</div>
				<br>
				<div class="form-group col-sm-8">
					<i class="fa-solid fa-user-tag fa-lg"></i> <label
						for="exampleInputPassword1">會員暱稱</label> <input type="text"
						class="form-control" id="UserNickname"
						th:value="${uservo.usernickname}" name="usernickname">
				</div>
				<br>
				<div class="form-group col-sm-8">
					<i class="fa-solid fa-location-dot fa-lg"></i> <label
						for="exampleInputPassword1">會員地址</label> <input type="text"
						class="form-control" id="UserAddress"
						th:value="${uservo.useraddress}" name="useraddress" required>
				</div>
				<br>
				<div class="form-group col-sm-8">
					<i class="fa-solid fa-phone fa-lg"></i> <label
						for="exampleInputPassword1">會員電話</label> <input type="text"
						class="form-control" id="UserMobile" th:value="${uservo.usertel}"
						name="usertel" required pattern="[0-9]{9,}">

				</div>
				<br> <input type="hidden" class="form-control" id="UserVip"
					th:value="${uservo.viplevelid}" name="viplevelid">



				<div class="form-group col-sm-8">
					<i class="fa-solid fa-calendar-days fa-lg"></i> <label
						for="exampleInputPassword1">會員申請日期</label> <input type="text"
						class="form-control" id="Userdatetime"
						th:value="${uservo.userregidate}" name="userregidate" readonly>
				</div>
				<br>

				<div class="form-group col-sm-8">
					<i class="fa-regular fa-id-card fa-lg"></i> <label
						for="exampleInputPassword1">會員狀態</label> 
<!-- 						<input type="text" -->
<!-- 						class="form-control" id="Userstatus" -->
<!-- 						th:value="${uservo.userstatusvo.statusid}" name="userstatus"> -->

				</div>
				<div class="form-group col-sm-8" th:switch="${uservo.userstatusvo.statusid}">
				<select class="form-select" name="userstatus" th:switch="${uservo.userstatusvo.statusid}">
					<option selected th:case="1" th:value=1 th:text="管理員"></option>
					<option selected th:case="2" th:value=2 th:text="未認證會員"></option>
					<option selected th:case="3" th:value=3 th:text="一般會員"></option>
<!-- 					<option th:if="${uservo.userstatusvo.statusid!=1}" th:value=1 th:text="管理員"></option> -->
					<option th:if="${uservo.userstatusvo.statusid!=2}" th:value=2 th:text="未認證會員"></option>
					<option th:if="${uservo.userstatusvo.statusid!=3}" th:value=3 th:text="一般會員"></option>
				</select> <br>
				</div>
				<div class="form-group col-sm-8">
					<i class="fa-solid fa-image fa-lg"></i> <label
						for="exampleInputPassword1">會員照片更換</label>				
						<input type="file" class="form-control" id="p_file" name="userpic">
					<br>
					<div>預覽圖</div>
					<div id="preview">
						<span class="preview_span"></span>
					</div>
				</div>
				<br>
				<button type="submit" class="btn btn-primary col-sm-5 ">送出資料</button>

			</form>

		</div>
	
      
      </div>
		</div>

	
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
		crossorigin="anonymous">
	</script>
	<script src="https://kit.fontawesome.com/726c532433.js"
		crossorigin="anonymous"></script>
	<script src="/sidebar-01/js/jquery.min.js"></script>
	<script src="/sidebar-01/js/popper.js"></script>
	<script src="/sidebar-01/js/bootstrap.min.js"></script>
	<script src="/sidebar-01/js/main.js"></script>
		<script>
		let preview_el = document.getElementById("preview");
		let p_file_el = document.getElementById("p_file");
		let UserName_el = document.getElementById("UserName");
		let UserNickname_el = document.getElementById("UserNickname");
		let UserAddress_el = document.getElementById("UserAddress");
		let UserMobile_el = document.getElementById("UserMobile");

		let preview_img = function(file) {
			var reader = new FileReader();
			reader.readAsDataURL(file);
			reader
					.addEventListener(
							"load",
							function() {
								let img_str = '<img src="' + reader.result + '" class="preview_img">';
								preview_el.innerHTML = img_str;
							})
		}

		p_file_el.addEventListener("change", function(e) {
			if (this.files.length > 0) {
				preview_img(this.files[0]);
			} else {
				preview_el.innerHTML = '<span class="text">預覽圖</span>';
			}
		});

		UserMobile_el.addEventListener("blur", function() {
			let s = this.validity;
			let msg = "";
			switch (true) {
			case s.patternMismatch:
				msg = "電話應為0-9的數字且長度不得低於9";
				break;
			}
			this.setCustomValidity(msg);
		});
	</script>
</body>
</html>